name: "Pull Request Workflow"
on:
  pull_request:
      types: [opened, synchronize, reopened, ready_for_review, labeled, unlabeled]

jobs:
  # unit tests
  unit-tests:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - run: npm install
    - run: npm test
    # Generation the new distribution
    - run: npm run package

  # test action works running from the graph  
  enforce-changelog:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: ./
    - uses: EndBug/add-and-commit@v4 # You can change this to use a specific version
      with:
        # The arguments for the `git add` command (see the paragraph below for more info)
        # Default: '.'
        add: 'dist'
        author_name: Your Name
        author_email: dwgoslen@gmail.com'
        message: 'Auto-building distribution'  
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
